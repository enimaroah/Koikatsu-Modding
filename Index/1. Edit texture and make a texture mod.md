### Use of the textures by essu#1145(Discord):

https://discordapp.com/channels/447114928785063977/447116603591622666/544143251951583233

### Normalmap studies from ymgpt#2373(Discord):

https://discordapp.com/channels/447114928785063977/447116603591622666/549436455907229697

### How to convert usual normalmap to KK normalmap from xm007#5145(Discord):

https://discordapp.com/channels/447114928785063977/447116603591622666/550295398305234944

### Detailmask studies from ymgpt#2373(Discord):

https://discordapp.com/channels/447114928785063977/447116603591622666/549835238465994753

### Create detailmask from a albedomap from xm007#5415(Discord):

https://discordapp.com/channels/447114928785063977/447116603591622666/550295424398000140

### How to make material detail texture for KK in Photoshop from Creamstar#2433(Discord):

https://www.youtube.com/watch?v=NI9EPj-f3i8

### Painting Eye-Lashes in 2d by enimaroah(Guthub):

https://github.com/enimaroah/SB3Utility/wiki/Painting-Eye-Lashes-in-2d

### Short explaintion of liquidmask by Wogrim#4935(Discord):

https://discordapp.com/channels/447114928785063977/447116603591622666/627177296637198377

#

  This first tutorial is a guide to making a simple eyeline mod.

  Before starting, we will need a template for drawing the eyeline to help find the correct position on the head when we paint the eyeline later. To start with, open the abdata\chara folder and look at their filenames. You will see many files given prefixes and special case files such as:

 - ao - Accessory
 - bo - Head and Hair
 - mt_ - textures
 - oo_base - Main Body Texture
 - mm_base - Main Body Mesh
 - face_present_50 - Default Face Preset
 - etc - Null Reference

  The first main step is to extract the eyeline UV map, which will serve as the template for painting our eyeline. To do this we will need the eyeline mesh from the head model. For an explanation on UVs see the following link: https://en.wikipedia.org/wiki/UV_mapping

 1. Open SB3UGS and open the file bo_head_00.unity3d
 2. Double click p_cf_head_00 on the panel underneath
 3. In the first middle column, select the Mesh tab
 4. In this list, select cf_0_eyeline
 5. In the column to the right of this list, click the Export button
![](https://github.com/xm007/Koikatsu-Modding/blob/master/Image/1/SB3UGS_export_eyeline.gif)

  Once you click the export button, SB3UGS will create new subfolders in your abdata\chara folder, which includes our eyeline mesh. We will now be moving to blender to generate a UV image. The key setting to note here is when importing our mesh, we want to set our scale to 100x as the game meshes are very small.

![](https://github.com/xm007/Koikatsu-Modding/blob/master/Image/1/scale100.png)

  Now we will prepare our UV layer for painting:
 1. Select your imported model with a left click
 2. Press 'Tab' to enter the model's edit mode and press '1' to enter Vertex Selection Mode, then press 'A' to select all of the vertices
 3. Pull out a new window and change its type to UV Editor
 4. Select the UV Menu dropdown and choose "Export UV Layout"
![](https://github.com/xm007/Koikatsu-Modding/blob/master/Image/1/blenderUV.gif)

  Now that we have our UV layout we can draw over top of this in any image editor software. We want to paint on a layer that resides on top of  our exported UV Layout map rather than on the same layer. Once you have a new layer to paint on top of, you can now paint your eyeline.
![](https://github.com/xm007/Koikatsu-Modding/blob/master/Image/1/draweyeline.gif)
![](https://github.com/xm007/Koikatsu-Modding/blob/master/Image/1/GIMPUV.png)

  Once you have finished your new eyeline, you will want to hide the layer that the UV Layout resides on because we don't want it to show up in game once we re-import it. Next you will want to resize the entire image to a 512x512 size as this is the texture size accepted by Koikatsu. After completing both steps, you can then export your image to png. 
![](https://github.com/xm007/Koikatsu-Modding/blob/master/Image/1/gimpscale.gif)

  Once exported, you will want to resize your image down to 256x256, along with adding a '_low' suffix to your filename. i.e. if your filename is cw_t_eyeline_up_000, your low resolution filename will be cw_t_eyeline_up_000_low. The filename in this case is important, as the the _low suffix file will be used during the free roaming mode in single player to reduce cpu/gpu utilization. If the name does not match or the suffix is missing, the eyeline won't show up on that character in free roam mode!

  Now that we have our new eyeline textures exported, we want to bring them back into the game. This guide will be showing you how to bring the texture back in by replacing existing resources. Please see the Stage 2 guide (currently pending) for instructions on how to create a sideloader mod which does not require you to replace existing eyelines and instead adding a new entry to the eyelines list in the character maker.

  To replace existing eyelines, we need to choose our target file. Back in SB3UGS, open the file 00.unity3d fromthe abdata\list\characustom folder. When looking at this  list, you will notice that the animators list is similar to the resources you saw earlier under abdata\chara. Now you will select mt_eyeline_up_00 in the bottom left panel.
![](https://github.com/xm007/Koikatsu-Modding/blob/master/Image/1/eyelineupSB3UGS.png)

  Once selected you will be presented with a spreadsheet of data with the following columns:
 - ID - Used to uniquely identify the resource
 - Kind & Possess - Unknown, but they should all be identical
 - Name - The display name that will be used in game
 - MainAB - The filepath of the resource
 - EyelineUpTex - The name of the texture
 - EyelineShadowTex - Eyeline shadow texture
 - ThumbAB - The path of the thumbnail/low res texture
 - ThumbTex - The name of the thumbnail/low res texture

  Since we are replacing an existing texture, we only need one target. In this example we will choose "タイプ１", with the file path chara/mt_eyeline_up_00.unity3d.

 1. Navigate back to the abdata\chara folder and use SB3UGS to open mt_eyeline_up_00.unity3d.
 2. Open cw_t_eyeline_up_00 (not cw_t_eyeline_kage_000!)m this will open a Materials and Textures tab to the right
 3. Drag in your new eyeline textures. This will open a new Images tab to the bottom left
 4. Select cf_O_eyeline_1.png in the bottom left panel, and then press and hold "Shift" then select in the next panel to the right "cw_t_eyeline_up_000"
 5. Click on the replace button on the right side of the Materials and Textures tab
 6. Repeat for the _low version of your texture (replacing cw_t_eyeline_up_00_low with cf_O_eyeline_1_low)
 7. Save your file, SB3UGS will create a backup copy.
![](https://github.com/xm007/Koikatsu-Modding/blob/master/Image/1/replaceeyeline.gif)

  Now we can open the game to see the changes in the character maker.
![](https://github.com/xm007/Koikatsu-Modding/blob/master/Image/1/result.png)
